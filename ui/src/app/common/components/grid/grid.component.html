<table>
  <tr>
    <th *ngFor="let column of columns; let i = index" (click)="onClickColumnSort(i)">
      {{ column.label }}
      <ng-container *ngIf="i === sortedColumnId">
        <ng-container *ngIf="sortDirection === 'asc'">ðŸ”¼</ng-container>
        <ng-container *ngIf="sortDirection === 'desc'">ðŸ”½</ng-container>
      </ng-container>
    </th>
  </tr>
  <tr *ngFor="let dataRow of sortedData" [ngStyle]="dataRow.rowStyle">
    <td
      *ngFor="let column of columns"
      [ngStyle]="getCellStyle(dataRow, column)"
      (click)="onClickCell(dataRow, column)"
      [attr.title]="getCellTooltip(dataRow, column)"
    >
      <!-- TODO: Wrapping an array and using ngFor is a hack to set the variable -->
      <ng-container *ngFor="let cellValue of [getCellValue(dataRow, column)]">
        <ng-container *ngIf="column.format">
          <ng-container [ngSwitch]="column.format.type">
            <ng-container *ngSwitchCase="'parse'">
              <app-parse-number
                *ngIf="cellValue"
                [specialization]="cellValue.specialization"
                [value]="cellValue.value"
              ></app-parse-number>
            </ng-container>
            <ng-container *ngSwitchCase="'number'">
              {{ cellValue | number : column.format.formatParams }}
            </ng-container>
            <ng-container *ngSwitchCase="'date'">
              {{ cellValue | date : column.format.formatParams }}
            </ng-container>
            <ng-container *ngSwitchCase="'custom'">
              {{ getColumnCustomFormat(column, dataRow) }}
            </ng-container>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="!column.format">
          {{ cellValue }}
        </ng-container>
      </ng-container>
    </td>
  </tr>
  <ng-content></ng-content>
</table>
